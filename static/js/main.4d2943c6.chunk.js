(this.webpackJsonpinstareels=this.webpackJsonpinstareels||[]).push([[0],{100:function(e,t,n){},110:function(e,t){},111:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),s=n.n(r),o=(n(93),n.p,n(94),n(21)),i=n.n(o),u=n(30),l=n(12),j=n(43);n(96),n(112),n(113);j.a.initializeApp({apiKey:"AIzaSyCg2hJ2B2VNsv7JfipC6T84u6JuDVTbQn0",authDomain:"reels-class-e8660.firebaseapp.com",projectId:"reels-class-e8660",storageBucket:"reels-class-e8660.appspot.com",messagingSenderId:"1007068379338",appId:"1:1007068379338:web:2fc72f822386b2a3c25c33"});var d=j.a.auth(),b=j.a.firestore(),p={users:b.collection("users"),posts:b.collection("posts"),comments:b.collection("comments"),getCurrentTimeStamp:j.a.firestore.FieldValue.serverTimestamp},m=j.a.storage(),f=j.a,O=n(3),h=c.a.createContext();var g=function(e){var t=e.children,n=Object(a.useState)(),c=Object(l.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(!0),i=Object(l.a)(o,2),u=i[0],j=i[1];Object(a.useEffect)((function(){var e=d.onAuthStateChanged((function(e){s(e),j(!1)}));return function(){e()}}),[]);var b={currentuser:r,login:function(e,t){return d.signInWithEmailAndPassword(e,t)},signup:function(e,t){return d.createUserWithEmailAndPassword(e,t)},logout:function(){return d.signOut()}};return Object(O.jsx)(h.Provider,{value:b,children:!u&&t})},x=n.p+"static/media/TM-Instagram.99d634ba.png",v=(n(100),n(16));function y(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),o=s[0],j=s[1],d=Object(a.useState)(""),b=Object(l.a)(d,2),g=(b[0],b[1]),y=Object(a.useState)(""),N=Object(l.a)(y,2),w=N[0],S=N[1],k=Object(a.useState)(!1),C=Object(l.a)(k,2),I=C[0],T=C[1],D=Object(a.useState)(null),U=Object(l.a)(D,2),F=U[0],E=U[1],P=Object(a.useContext)(h).signup,A=Object(a.useContext)(h),B=A.logout,L=A.currentuser,R=Object(v.g)(),z=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,c,r,s,l,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a=function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case f.storage.TaskState.PAUSED:console.log("Upload is paused");break;case f.storage.TaskState.RUNNING:console.log("Upload is running")}},c=function(e){g(e),setTimeout((function(){g("")}),2e3)},r=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.snapshot.ref.getDownloadURL();case 2:return t=e.sent,console.log(t),console.log("start"),e.next=7,p.users.doc(l).set({email:n,password:o,userId:l,username:w,createdAt:p.getCurrentTimeStamp(),profileUrl:t,postIds:[]});case 7:R.push("/"),console.log("end");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T(!0),e.next=8,P(n,o);case 8:s=e.sent,l=s.user.uid,console.log(l),(j=m.ref("/users/"+l+"/profileImage").put(F)).on("state_changed",a,c,r),T(!1),console.log("signed up"),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),g(e.t0),setTimeout((function(){g("")}),2e3),T(!1);case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,T(!0),e.next=5,B(n,o);case 5:a=e.sent,console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){L&&R.push("/")})),Object(O.jsxs)("div",{className:"Maincontainer",children:[Object(O.jsx)("div",{className:"Main1",children:Object(O.jsxs)("div",{className:"Iphone",children:[Object(O.jsxs)("div",{className:"camandmic",children:[Object(O.jsx)("div",{className:"dot"}),Object(O.jsxs)("div",{className:"speak1",children:[Object(O.jsx)("div",{className:"cam"}),Object(O.jsx)("div",{className:"speak"})]})]}),Object(O.jsx)("div",{className:"Display",children:Object(O.jsx)("div",{className:"dis",children:Object(O.jsx)("img",{className:"Homepage",src:x})})}),Object(O.jsx)("div",{className:"button",children:Object(O.jsx)("div",{className:"bt"})})]})}),Object(O.jsxs)("div",{className:"signupdet",children:[Object(O.jsx)("div",{className:"instadiv",children:Object(O.jsx)("i",{className:"fab fa-instagram insta"})}),Object(O.jsxs)("form",{onSubmit:z,children:[Object(O.jsx)("div",{children:Object(O.jsx)("input",{className:"Box",type:"text",value:w,placeholder:"Username",onChange:function(e){return S(e.target.value)}})}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{className:"Box",type:"email",value:n,placeholder:"Email",onChange:function(e){return c(e.target.value)}})}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{className:"Box",type:"password",value:o,placeholder:"Password",onChange:function(e){return j(e.target.value)}})}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];console.log(t),null!=t&&E(t)}})}),Object(O.jsx)("button",{className:"signbtn",type:"submit",disabled:I,children:"Signup"})]}),Object(O.jsx)("button",{className:"signout",onClick:M,disabled:I,children:"signout"})]})]})}var N=c.a.memo(y),w=n(182),S=n(172),k=n(169),C=n(178),I=n(170),T=n(180),D=n(166),U=n(173),F=n(78),E=n(167),P=n(168),A=n(75),B=n.n(A);var L=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function R(){var e=L(),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(l.a)(s,2),j=o[0],d=o[1],b=Object(a.useState)(""),p=Object(l.a)(b,2),m=p[0],f=p[1],g=Object(a.useState)(!1),x=Object(l.a)(g,2),y=x[0],N=x[1],E=Object(a.useContext)(h),A=E.login,R=E.currentuser,z=Object(v.g)(),M=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hi"),t.preventDefault(),e.prev=2,console.log("Logging in user"),N(!0),e.next=7,A(c,j);case 7:N(!1),z.push("/"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),f("Failed to log in"),setTimeout((function(){return f("")}),2e3),N(!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){R&&z.push("/")})),Object(O.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:e.paper,children:[Object(O.jsx)(w.a,{className:e.avatar,children:Object(O.jsx)(B.a,{})}),Object(O.jsx)(F.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(O.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(O.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:j,onChange:function(e){return d(e.target.value)}}),Object(O.jsx)(I.a,{control:Object(O.jsx)(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(O.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:y,onClick:M,children:"Sign In"}),m?Object(O.jsx)("h1",{children:m}):Object(O.jsx)(O.Fragment,{}),Object(O.jsxs)(U.a,{container:!0,children:[Object(O.jsx)(U.a,{item:!0,xs:!0,children:Object(O.jsx)(D.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(O.jsx)(U.a,{item:!0,children:Object(O.jsx)(D.a,{href:"signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})}var z=n(174),M=n(175),W=n(171),J=n(183),V=n(77),G=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"black"},appb:{backgroundColor:"white"},icon:{color:"black"},acount:{height:"3rem",width:"3rem",borderRadius:"50%"}}}));function q(e){console.log(e);var t=G(),n=c.a.useState(!0),a=Object(l.a)(n,2),r=a[0],s=(a[1],c.a.useState(null)),o=Object(l.a)(s,2),j=o[0],d=o[1],b=Boolean(j),p=function(){d(null)},m=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("hiii");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("hiii"),Object(O.jsx)("div",{className:t.root,children:Object(O.jsx)(z.a,{className:t.appb,position:"fixed",children:Object(O.jsxs)(M.a,{children:[Object(O.jsx)(F.a,{variant:"h6",className:t.title,children:"Instagram"}),r&&Object(O.jsxs)("div",{children:[Object(O.jsx)(W.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(O.jsx)("img",{src:e.userdata.profileUrl,className:t.acount})}),Object(O.jsxs)(V.a,{id:"menu-appbar",anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:p,children:[Object(O.jsx)(J.a,{onClick:p,children:"Profile"}),Object(O.jsx)(J.a,{onClick:p,children:"My account"}),Object(O.jsx)(J.a,{onClick:m,children:"log out"})]})]})]})})})}var _=n(32),H=n(76),K=n.n(H),Q=n(179),X=n(176),Y=n(181),Z=Object(E.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),marginTop:"6rem"}}}}));function $(e){Z();var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),o=Object(l.a)(s,2),j=o[0],d=o[1],b=["video/mp4","video/webm","video/ogg"];return Object(O.jsx)(O.Fragment,{children:null!=j?Object(O.jsx)(Q.a,{severity:"error",children:j}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{color:"primary",type:"file",id:"icon-button-file",hidden:!0,style:{display:"node"},onChange:function(t){var n;r(!0);var a=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files[0];if(console.log(a),!a)return d("please select a  file"),void setTimeout((function(){d("")}),2e3);if(-1==b.indexOf(null===a||void 0===a?void 0:a.type))return d("please select a video file"),void setTimeout((function(){d("")}),2e3);if(a.size/1048576>100)return d("selected file size too big"),void setTimeout((function(){d("")}),2e3);var c=Object(Y.a)();console.log(c);var s=m.ref("/posts/"+e.userData.userId+"/"+a.name).put(a);function o(){return(o=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(!0),s.snapshot.ref.getDownloadURL().then((function(t){var n={comments:[],likes:[],pid:c,pUrl:t,uName:e.userData.username,uProfile:e.userData.profileUrl,userId:e.userData.userId,cratedAt:p.getCurrentTimeStamp()};p.posts.add(n).then(function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,p.users.doc(e.userData.userId).update({postIds:[].concat(Object(_.a)(e.userData.postIds),[n.id])});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){r(!1)})).catch((function(e){d(e),setTimeout((function(){d("")}),2e3),r(!1)}))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case f.storage.TaskState.PAUSED:console.log("Upload is paused");break;case f.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){d(e),setTimeout((function(){d("")}),2e3)}),(function(){return o.apply(this,arguments)})),r(!1)}}),Object(O.jsx)("label",{htmlFor:"icon-button-file",children:Object(O.jsxs)(S.a,{variant:"outlined",component:"span",style:{marginTop:"7rem",marginLeft:"5.5rem"},color:"secondary",children:[Object(O.jsx)(K.a,{}),"Upload video"]})}),c?Object(O.jsx)(X.a,{color:"secondary",style:{width:"15%",margin:"0 auto",marginTop:"6%"}}):Object(O.jsx)(O.Fragment,{})]})})}var ee=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)($,{userData:e.userData})})},te=n(42);var ne=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("video",{className:"player1",onEnded:function(e){var t=s.a.findDOMNode(e.target).parentNode.nextSibling;t&&(t.scrollIntoView({behaviour:"smooth"}),e.target.muted=!0)},onClick:function(e){e.preventDefault(),e.target.muted=!e.target.muted},children:Object(O.jsx)("source",{src:e.source})})})},ae=n(177);function ce(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),r=n[0],s=n[1],o=new IntersectionObserver((function(e){e.forEach((function(e){console.log(e);var t=e.target.childNodes[0];t.play().then((function(){t.paused||e.isIntersecting||t.pause()}))}))}),{threshold:.9});return Object(a.useEffect)((function(){var e=[];return p.posts.orderBy("cratedAt","desc").onSnapshot((function(t){e=[],t.forEach((function(t){var n=Object(te.a)(Object(te.a)({},t.data()),{},{postId:t.id});e.push(n)})),s(e)}))}),[]),Object(a.useEffect)((function(){return document.querySelectorAll(".player").forEach((function(e){o.observe(e)})),function(){o.disconnect()}}),[r]),Object(O.jsx)(O.Fragment,{children:null==r?Object(O.jsx)(ae.a,{}):r.map((function(e){return Object(O.jsx)(c.a.Fragment,{children:Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsxs)("div",{className:"username",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:e.uProfile,className:"userProfile"})})," ",Object(O.jsx)("span",{children:"    "}),Object(O.jsx)("span",{children:e.uName})]}),Object(O.jsx)("div",{className:"player",children:Object(O.jsx)(ne,{source:e.pUrl},e.pid)},e.pid)]},e.postId)},e.postId)}))})}Object(E.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}));var re=function(){var e=Object(a.useContext)(h).currentuser,t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){p.users.doc(e.uid).onSnapshot((function(e){console.log(e.data()),r(e.data())}))}),[e]),Object(O.jsx)(O.Fragment,{children:null==c?Object(O.jsx)(ae.a,{}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(q,{userdata:c}),Object(O.jsx)(ee,{userData:c}),Object(O.jsx)(ce,{userData:c})]})})})},se=(n(110),n(4)),oe=["component"];var ie=function(e){var t=e.component,n=Object(se.a)(e,oe),c=Object(a.useContext)(h).currentuser;return console.log("1 ",c),Object(O.jsx)(v.b,Object(te.a)(Object(te.a)({},n),{},{render:function(e){return c?Object(O.jsx)(t,Object(te.a)({},e)):Object(O.jsx)(v.a,{to:"/login"})}}))},ue=n(53);var le=function(){return Object(O.jsx)(ue.a,{children:Object(O.jsx)(g,{children:Object(O.jsxs)(v.d,{children:[Object(O.jsx)(ie,{exact:!0,path:"/",component:re}),Object(O.jsx)(v.b,{path:"/login",component:R}),Object(O.jsx)(v.b,{path:"/signup",component:N})]})})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,184)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(le,{}),document.getElementById("root")),je()},93:function(e,t,n){},94:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.4d2943c6.chunk.js.map